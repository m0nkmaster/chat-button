============================= test session starts ==============================
platform darwin -- Python 3.13.0, pytest-8.3.4, pluggy-1.5.0 -- /Users/robmacdonald/.pyenv/versions/chat-button/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/robmacdonald/Documents/projects/pyhi
configfile: pyproject.toml
plugins: cov-6.0.0, anyio-3.7.1
collecting ... collected 17 items

tests/audio/test_recorder.py::test_init_with_valid_device PASSED         [  5%]
tests/audio/test_recorder.py::test_init_with_no_input_channels PASSED    [ 11%]
tests/audio/test_recorder.py::test_init_with_no_device_index PASSED      [ 17%]
tests/audio/test_recorder.py::test_init_error_callback PASSED            [ 23%]
tests/audio/test_recorder.py::test_cleanup_error_handling PASSED         [ 29%]
tests/audio/test_recorder.py::test_start_recording PASSED                [ 35%]
tests/audio/test_recorder.py::test_start_recording_error PASSED          [ 41%]
tests/audio/test_recorder.py::test_stop_recording_no_speech PASSED       [ 47%]
tests/audio/test_recorder.py::test_stop_recording_with_speech PASSED     [ 52%]
tests/audio/test_recorder.py::test_stop_recording_wake_word_mode PASSED  [ 58%]
tests/audio/test_recorder.py::test_stop_recording_error_handling PASSED  [ 64%]
tests/audio/test_recorder.py::test_stop_recording_without_start PASSED   [ 70%]
tests/audio/test_recorder.py::test_cleanup_on_deletion PASSED            [ 76%]
tests/audio/test_recorder.py::test_init_with_no_input_devices PASSED     [ 82%]
tests/audio/test_recorder.py::test_stop_recording_io_error PASSED        [ 88%]
tests/audio/test_recorder.py::test_stop_recording_error_with_callback PASSED [ 94%]
tests/audio/test_recorder.py::test_stop_recording_stream_close_error PASSED [100%]

---------- coverage: platform darwin, python 3.13.0-final-0 ----------
Name                    Stmts   Miss  Cover   Missing
-----------------------------------------------------
src/audio/recorder.py     130      1    99%   84
-----------------------------------------------------
TOTAL                     130      1    99%


============================== 17 passed in 0.11s ==============================
